<!doctype html>
{% load static %}
<html class="no-js" lang="en">

<head>
    <!-- Start datatable css -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.18/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.jqueryui.min.css">
    {% include "./base/head.html" with title="Tickets List" %}
</head>

<body class="body-bg">
    <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <!-- preloader area start -->
    <div id="preloader">
        <div class="loader"></div>
    </div>
    <!-- preloader area end -->
    <!-- page container area start -->
    <div class="horizontal-main-wrapper">

        {% include './base/header.html' with name=user_name %}
        <!-- main content area start -->
        <div class="main-content-inner">
            <!-- page title area end -->
            <div class="main-content-inner">
                <div class="container">
                    <div class="row">
                        <!-- Primary table start -->
                        <div class="col-12 mt-5">
                            <div class="card">
                                <div class="card-body ticket-body">
                                    <h4 class="header-title">Tickets</h4>
                                    <a role="button" class="btn btn-success mb-3" id="new-ticket" href="add/"><i class="fa fa-plus-square"></i> New Ticket</a>
                                    <div class="data-tables datatable-primary">
                                        <table id="dataTable2" class="text-center" style="width: 100% !important">
                                            <thead class="text-capitalize">
                                                <tr>
                                                    <th>Create Time</th>
                                                    {% if is_support %}
                                                    <th>Owner</th>
                                                    {% endif %}
                                                    <th>Title</th>
                                                    <th>State</th>
                                                    <th>Last Update</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for x in object_list %}
                                                <tr>
                                                    <td>{{ x.dateTime }}</td>
                                                    {% if is_support %}
                                                    <td>{{ x.creator }}</td>
                                                    {% endif %}
                                                    <td>{{ x.title }}</td>
                                                    {% if x.state == "Waiting for response" %}
                                                        <td><span class="badge badge-warning" style="font-size:100%">{{ x.state }}</span></td>
                                                    {% elif x.state == "Answered" %}
                                                        <td><span class="badge badge-success" style="font-size:100%">{{ x.state }}</span></td>
                                                    {% else %}
                                                        <td><span class="badge badge-secondary" style="font-size:100%">{{ x.state }}</span></td>
                                                    {% endif %}
                                                    <td>{{ x.lastUpdate }}</td>
                                                    <td><a class="btn btn-outline-primary mb-3" href="{% url 'ticket details' ticket_id=x.id %}" role="button">View</a></td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Primary table end -->
                    </div>
                </div>
            </div>
        </div>
        <!-- main content area end -->
        <!-- footer area start-->
        <footer>
            <div class="footer-area">
                <p>Â© Copyright 2019. All right reserved.</p>
            </div>
        </footer>
        <!-- footer area end-->
    </div>
    <!-- page container area end -->
    <!-- jquery latest version -->
    <script src="{% static 'dashboard/js/vendor/jquery-2.2.4.min.js' %}"></script>
    <!-- bootstrap 4 js -->
    <script src="{% static 'dashboard/js/popper.min.js' %}"></script>
    <script src="{% static 'dashboard/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'dashboard/js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'dashboard/js/metisMenu.min.js' %}"></script>
    <script src="{% static 'dashboard/js/jquery.slimscroll.min.js' %}"></script>
    <script src="{% static 'dashboard/js/jquery.slicknav.min.js' %}"></script>

    <!-- Start datatable js -->
    <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
    <script src="https://cdn.datatables.net/1.10.18/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.18/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap.min.js"></script>
    <!-- others plugins -->
    <script src="{% static 'dashboard/js/plugins.js' %}"></script>
    <script src="{% static 'dashboard/js/scripts.js' %}"></script>

    <script>
        document.querySelector('.sorting_asc').click();
    </script>
</body>

</html>
